(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){"use strict";var a={FETCH_USER:"FETCH_USER",LOGOUT_USER:"LOGOUT_USER"},r={OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL"};n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},204:function(e,t,n){e.exports=n(342)},336:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),u=n(33),l=n(26),i=n(111),s=n(114),d=n(109),f=n(27),p=n(19),m=Object(p.createMuiTheme)({typography:{useNextVariants:!0}}),E=n(86),h=n(34),O=n(24),b=n(51),y=n(92),v=Object(u.b)(function(e){return{modals:e.modals}},function(e){return{handleToken:function(t){return e(b.a.handleToken(t))},closeModal:function(){return e(y.a.closeModal())}}})(Object(h.injectStripe)(function(e){var t=e.modals.billingDialog,n=e.handleToken,a=e.stripe,c=e.closeModal;return r.a.createElement(O.c,{open:t||!1,maxWidth:"sm",onClose:t?c:null,fullWidth:!0},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.createToken({name:"test name"}).then(function(e){var t=e.token;n(t)})}},r.a.createElement(O.f,null,"Pay us money - $5 (any test data)"),r.a.createElement(O.g,{style:{marginBottom:"25px"}}),r.a.createElement(O.e,null,r.a.createElement(h.CardElement,null)),r.a.createElement(O.g,null),r.a.createElement(O.d,{style:{textAlign:"center",padding:"10px"}},r.a.createElement(O.b,{style:{margin:"auto"},type:"submit"},"Submit"))))})),S=(n(336),Object(a.lazy)(function(){return n.e(3).then(n.bind(null,355))})),g=function(){return r.a.createElement("h2",null,"Dashboard")},w=function(){return r.a.createElement("h2",null,"SurveyNew")},_=Object(a.lazy)(function(){return n.e(4).then(n.bind(null,356))}),j=Object(u.b)(function(e){return{auth:e.auth}},function(e){return{fetchUser:function(){return e(E.a.fetchUser())}}})(function(e){var t=e.fetchUser,n=e.auth;Object(a.useEffect)(function(){console.log(n),t()},[n?n._id:n]);var c=Object(a.useState)(null),o=Object(s.a)(c,2),u=o[0],l=o[1];return Object(a.useEffect)(function(){window.Stripe?l(window.Stripe("pk_test_O5QbdxxYdT1vCitAdhv1ZeVm")):document.querySelector("#stripe-js").addEventListener("load",function(){l(window.Stripe("pk_test_O5QbdxxYdT1vCitAdhv1ZeVm"))})},[]),r.a.createElement(p.MuiThemeProvider,{theme:m},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"}},r.a.createElement("p",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"Loading..."))},r.a.createElement(d.a,null,r.a.createElement(S,null),r.a.createElement(f.a,{path:"/surveys/new",component:w}),r.a.createElement(f.a,{path:"/surveys",component:g,exact:!0}),r.a.createElement(f.a,{path:"/",component:_,exact:!0})),r.a.createElement(h.StripeProvider,{stripe:u},r.a.createElement(h.Elements,null,r.a.createElement(v,null)))))}),x=n(14),L=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.a.FETCH_USER:return t.payload||!1;default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case x.b.OPEN_MODAL:return t.payload;case x.b.CLOSE_MODAL:return!1;default:return e}}}),T=Object(l.d)(L,{},Object(l.a)(i.a));o.a.render(r.a.createElement(u.a,{store:T},r.a.createElement(j,null)),document.getElementById("root"))},51:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(28),r=n.n(a),c=n(53),o=n(54),u=n.n(o),l=n(14),i={fetchUser:function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/current_user");case 2:n=e.sent,t({type:l.a.FETCH_USER,payload:n.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},logoutUser:function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/logout");case 2:t({type:l.a.FETCH_USER,payload:!1});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},handleToken:function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,u.a.post("/api/stripe",e);case 3:a=t.sent,n({type:l.a.FETCH_USER,payload:a.data}),n({type:l.b.CLOSE_MODAL,payload:!1});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}},86:function(e,t,n){"use strict";var a=n(51);n.d(t,"a",function(){return a.a})},92:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(112),r=n(14),c={openModal:function(e){return function(t){t({type:r.b.OPEN_MODAL,payload:Object(a.a)({},e,!0)})}},closeModal:function(){return function(e){e({type:r.b.CLOSE_MODAL,payload:!1})}}}}},[[204,1,2]]]);
//# sourceMappingURL=main.4cd371d1.chunk.js.map