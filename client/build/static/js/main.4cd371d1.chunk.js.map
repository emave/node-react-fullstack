{"version":3,"sources":["Constants/authConstants.js","Constants/modalConstants.js","Constants/index.js","Config/Theme.js","Components/Dialogs/billingDialog.js","Components/App.js","Reducers/index.js","Reducers/authReducers.js","Reducers/modalReducers.js","index.js","Actions/authActions.js","Actions/index.js","Actions/modalActions.js"],"names":["authConstants","FETCH_USER","LOGOUT_USER","modalConstants","OPEN_MODAL","CLOSE_MODAL","__webpack_require__","d","__webpack_exports__","customTheme","createMuiTheme","typography","useNextVariants","connectedComponent","connect","_ref2","modals","dispatch","handleToken","token","authActions","closeModal","modalActions","injectStripe","props","billingDialog","stripe","react_default","a","createElement","index_es","open","maxWidth","onClose","fullWidth","onSubmit","e","preventDefault","createToken","name","then","_ref","style","marginBottom","react_stripe_elements_es","textAlign","padding","margin","type","Header","lazy","bind","Dashboard","SurveyNew","Landing","auth","fetchUser","useEffect","console","log","_id","_useState","useState","_useState2","Object","slicedToArray","stripeState","setStripe","window","Stripe","process","document","querySelector","addEventListener","styles","theme","react","fallback","width","height","position","top","left","transform","react_router_dom","react_router","path","component","exact","combineReducers","state","arguments","length","undefined","action","payload","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDom","render","es","Components_App","getElementById","_home_circleci_project_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_circleci_project_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","res","wrap","_context","prev","next","axios","get","sent","data","stop","_x","apply","this","logoutUser","_callee2","_context2","_x2","_ref3","_callee3","_context3","post","_x3","_authActions__WEBPACK_IMPORTED_MODULE_0__","openModal","modalName","_home_circleci_project_client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/main.4cd371d1.chunk.js","sourcesContent":["export const authConstants = {\n    FETCH_USER: 'FETCH_USER',\n    LOGOUT_USER: 'LOGOUT_USER'\n};","export const modalConstants = {\n  OPEN_MODAL: 'OPEN_MODAL',\n  CLOSE_MODAL: 'CLOSE_MODAL'\n};","export * from './authConstants';\nexport * from './modalConstants';","import { createMuiTheme } from '@material-ui/core/styles';\n\nexport const customTheme = createMuiTheme({\n    typography: { useNextVariants: true },\n});","import React from 'react';\nimport {CardElement, injectStripe} from \"react-stripe-elements\";\nimport {\n  Button,\n  Dialog, DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider\n} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\nimport {authActions} from '../../Actions/authActions';\nimport {modalActions} from \"../../Actions/modalActions\";\n\nconst Payments = (props) => {\n  const {modals: {billingDialog}, handleToken, stripe, closeModal} = props;\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    stripe.createToken({name: 'test name'}).then(({token}) => {\n      handleToken(token);\n    });\n  };\n\n  return <Dialog\n    open={billingDialog || false}\n    maxWidth={'sm'}\n    onClose={billingDialog ? closeModal : null}\n    fullWidth={true}\n  >\n    <form onSubmit={submitHandler}>\n      <DialogTitle>\n        Pay us money - $5 (any test data)\n      </DialogTitle>\n      <Divider style={{marginBottom: '25px'}}/>\n      <DialogContent>\n        <CardElement/>\n      </DialogContent>\n      <Divider/>\n      <DialogActions style={{textAlign: 'center', padding: '10px'}}>\n        <Button style={{margin: 'auto'}} type={'submit'}>Submit</Button>\n      </DialogActions>\n    </form>\n  </Dialog>\n};\n\nconst mapStateToProps = ({modals}) => ({modals});\n\nconst mapDispatchToProps = (dispatch) => ({\n  handleToken: (token) => dispatch(authActions.handleToken(token)),\n  closeModal: () => dispatch(modalActions.closeModal())\n});\n\nconst connectedComponent = connect(mapStateToProps, mapDispatchToProps)(injectStripe(Payments));\n\nexport {connectedComponent as BillingDialog};","import React, {Suspense, lazy, useEffect, useState} from \"react\";\nimport {Route, BrowserRouter} from 'react-router-dom';\nimport {MuiThemeProvider} from '@material-ui/core/styles';\nimport {customTheme} from \"../Config/Theme\";\nimport {connect} from \"react-redux\";\nimport {authActions} from \"../Actions\";\nimport {BillingDialog} from \"./Dialogs\";\nimport '../Styles/App.sass';\nimport {Elements, StripeProvider} from \"react-stripe-elements\";\n\nconst Header = lazy(() => import('./Header'));\nconst Dashboard = () => <h2>Dashboard</h2>;\nconst SurveyNew = () => <h2>SurveyNew</h2>;\nconst Landing = lazy(() => import('./Landing'));\n\nconst App = (props) => {\n  const {fetchUser, auth} = props;\n\n  useEffect(() => {\n    console.log(auth);\n    fetchUser();\n  }, [auth ? auth._id : auth]);\n\n  const [stripeState, setStripe] = useState(null);\n\n  useEffect(() => {\n    if (window.Stripe) {\n      setStripe(window.Stripe(process.env.REACT_APP_STRIPE_KEY));\n    } else {\n      document.querySelector('#stripe-js').addEventListener('load', () => {\n        setStripe(window.Stripe(process.env.REACT_APP_STRIPE_KEY));\n      });\n    }\n  }, []);\n\n  return (\n    <MuiThemeProvider theme={customTheme}>\n      <Suspense fallback={\n        <div style={{width: '100%', height: '100%', position: 'fixed', top: '0', left: '0'}}>\n          <p style={{position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)'}}>Loading...</p>\n        </div>\n      }>\n        <BrowserRouter>\n          <Header/>\n          <Route path={'/surveys/new'} component={SurveyNew}/>\n          <Route path={'/surveys'} component={Dashboard} exact/>\n          <Route path={'/'} component={Landing} exact/>\n        </BrowserRouter>\n\n        <StripeProvider stripe={stripeState}>\n          <Elements>\n            <BillingDialog/>\n          </Elements>\n        </StripeProvider>\n\n      </Suspense>\n\n    </MuiThemeProvider>\n  )\n};\n\nconst mapStateToProps = ({auth}) => ({auth});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchUser: () => dispatch(authActions.fetchUser())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import { combineReducers } from \"redux\";\nimport authReducer from './authReducers';\nimport modalReducers from './modalReducers';\n\nexport default combineReducers({\n    auth: authReducer,\n    modals: modalReducers\n})","import {authConstants} from \"../Constants\";\n\n\nexport default (state = null, action) => {\n    switch (action.type) {\n        case authConstants.FETCH_USER:\n            return action.payload || false;\n        default:\n            return state;\n    }\n};","import {modalConstants} from \"../Constants\";\n\n\nexport default (state = false, action) => {\n  console.log(action);\n  switch (action.type) {\n    case modalConstants.OPEN_MODAL:\n      return action.payload;\n    case modalConstants.CLOSE_MODAL:\n      return false;\n    default:\n      return state;\n  }\n};","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware} from \"redux\";\nimport reduxThunk from 'redux-thunk';\n\nimport App from \"./Components/App\";\nimport reducers from './Reducers';\n\nconst store = createStore(reducers, {}, applyMiddleware(reduxThunk));\n\nReactDom.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root'));","import axios from 'axios';\nimport {authConstants, modalConstants} from \"../Constants\";\n\nconst fetchUser = () => async dispatch => {\n  const res = await axios.get('/api/current_user');\n  dispatch({type: authConstants.FETCH_USER, payload: res.data});\n};\n\nconst logoutUser = () => async dispatch => {\n  await axios.get('/api/logout');\n  dispatch({type: authConstants.FETCH_USER, payload: false});\n};\n\nconst handleToken = (token) => async dispatch => {\n  console.log(token);\n  const res = await axios.post('/api/stripe', token);\n  dispatch({type: authConstants.FETCH_USER, payload: res.data});\n  dispatch({type: modalConstants.CLOSE_MODAL, payload: false});\n};\n\nexport const authActions = {\n  fetchUser,\n  logoutUser,\n  handleToken\n};","export * from './authActions'","import {modalConstants} from \"../Constants\";\n\nconst openModal = modalName => dispatch => {\n  dispatch({type: modalConstants.OPEN_MODAL, payload: { [modalName]: true }});\n};\n\nconst closeModal = () => dispatch => {\n  dispatch({type: modalConstants.CLOSE_MODAL, payload: false});\n};\n\nexport const modalActions = {\n  openModal,\n  closeModal\n};"],"sourceRoot":""}